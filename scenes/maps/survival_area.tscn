[gd_scene load_steps=12 format=3 uid="uid://3j1sn12jdmir"]

[ext_resource type="Script" path="res://scenes/maps/SurvivalArea.gd" id="1_hfxbc"]
[ext_resource type="PackedScene" uid="uid://cmq4kav7bbo5s" path="res://scenes/maps/spawner/spawn_wave.tscn" id="3_m5ov3"]
[ext_resource type="PackedScene" uid="uid://ctvpcfm5heb5" path="res://scenes/mobs/tiny/tiny.tscn" id="4_on70m"]
[ext_resource type="PackedScene" uid="uid://bwqbgwl7hvop0" path="res://scenes/mobs/medioid/medioid.tscn" id="5_gf0h6"]
[ext_resource type="PackedScene" uid="uid://d0ea3013fce28" path="res://scenes/mobs/bat/bat.tscn" id="6_r4sby"]

[sub_resource type="Curve" id="Curve_p4e6e"]
max_value = 3.0
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.162921, 1.21978), -1.42738, -1.42738, 0, 0, Vector2(0.52809, 0), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 4

[sub_resource type="Gradient" id="Gradient_74tse"]
interpolation_mode = 2
offsets = PackedFloat32Array(0, 0.0779221, 0.714286)
colors = PackedColorArray(1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_laqsj"]
gradient = SubResource("Gradient_74tse")
width = 256
height = 256
fill = 1
fill_from = Vector2(0.5, 0.5)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_3w0wd"]
vertices = PackedVector2Array(56, -55, 71, -22, 71, 28, 44, 63, -8, 71, -42, 58, -64, 27, -67, -23, -50, -50, -30, -67, 8, -74)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-59, -57, -34, -77, 9, -85, 64, -63, 81, -24, 81, 32, 50, 73, -9, 82, -49, 67, -74, 31, -78, -26)])
source_geometry_group_name = &"navigation_polygon_source_group"

[sub_resource type="CircleShape2D" id="CircleShape2D_0b5dl"]

[sub_resource type="Curve2D" id="Curve2D_22gsu"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 100, -100, 0, 0, 0, 0, 100, 100, 0, 0, 0, 0, -100, 100, 0, 0, 0, 0, -100, -100, 0, 0, 0, 0, 100, -100)
}
point_count = 5

[node name="SurvivalArea" type="Area2D"]
collision_layer = 32
collision_mask = 84
script = ExtResource("1_hfxbc")

[node name="CPUParticles2D" type="CPUParticles2D" parent="."]
amount = 600
speed_scale = 0.5
emission_shape = 2
emission_sphere_radius = 80.0
direction = Vector2(0, 0)
spread = 0.0
gravity = Vector2(0, 0)
radial_accel_min = -400.0
scale_amount_max = 3.0
scale_amount_curve = SubResource("Curve_p4e6e")
color = Color(0, 0, 0, 1)

[node name="PointLight2D" type="PointLight2D" parent="."]
scale = Vector2(1.52036, 1.52036)
energy = 1.42
blend_mode = 1
texture = SubResource("GradientTexture2D_laqsj")

[node name="EnemyArea" type="NavigationRegion2D" parent="."]
navigation_polygon = SubResource("NavigationPolygon_3w0wd")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
scale = Vector2(4.25692, 4.15838)
shape = SubResource("CircleShape2D_0b5dl")

[node name="BetweenWaveTime" type="Timer" parent="."]
wait_time = 5.0
one_shot = true

[node name="SpawnPath" type="Path2D" parent="."]
curve = SubResource("Curve2D_22gsu")

[node name="SpawnPoint" type="PathFollow2D" parent="SpawnPath"]
position = Vector2(100, -100)
rotation = 1.5708

[node name="Spawner" type="Node2D" parent="."]
position = Vector2(0.0157623, -0.0139542)
scale = Vector2(0.0484447, 0.0599842)

[node name="SpawnWave" parent="Spawner" instance=ExtResource("3_m5ov3")]
danger_level = 1.0
spawn_speed = 0.216
enemy1 = ExtResource("4_on70m")
enemy1_number = 40

[node name="SpawnWave2" parent="Spawner" instance=ExtResource("3_m5ov3")]
enemy1 = ExtResource("5_gf0h6")
enemy1_number = 4
enemy2 = ExtResource("6_r4sby")
enemy2_number = 20

[node name="SpawnWave3" parent="Spawner" instance=ExtResource("3_m5ov3")]
danger_level = 3.0
enemy1 = ExtResource("5_gf0h6")
enemy1_number = 4
enemy2 = ExtResource("4_on70m")
enemy2_number = 20

[connection signal="body_entered" from="." to="." method="_on_body_entered"]
[connection signal="spawns_done" from="." to="." method="_on_spawns_done"]
[connection signal="timeout" from="BetweenWaveTime" to="." method="_on_between_wave_time_timeout"]
